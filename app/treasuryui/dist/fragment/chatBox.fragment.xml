<core:FragmentDefinition xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core"
    xmlns:u="sap.ui.unified"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">

  <!-- VBox fills available space -->
  <VBox class="ChatBox dasTextAreaInput" fitContainer="true">
      
      <!-- Top Section: TextArea + Busy Indicator -->
      <VBox fitContainer="true">
        <FlexBox id="ChatBotresult" direction="Column" fitContainer="true" class="chatInputBox">
          <TextArea 
              id="chatFeedInput"
              width="100%"
              rows="3"
              growing="true"
              growingMaxLines="10"
              class="chattextarea"
              liveChange="userlivechange"
              value="{chatModel>/userMessage}"
              enabled="{= !${chatModel>/busyIndicator} }"
              placeholder="{chatModel>/placeHolder}"
              maxLength="1000"
              showExceededText="true">
            <layoutData>
              <FlexItemData growFactor="1" minHeight="5rem"/>
            </layoutData>
          </TextArea>
        </FlexBox>

        <FlexBox id="chatBusyIndicator1"
                 visible="{chatModel>/busyIndicator}"
                 justifyContent="Center"
                 alignItems="Center"
                 class="busyBox"/> 
      </VBox>

      <!-- Bottom Section: Buttons fixed to bottom -->
      <HBox id="btncontrolls"
            justifyContent="Start"
            alignItems="Center"
            class="buttonBox"
            fitContainer="false">
          <Button text="Ask FinSight"
                  press="onUserChat"
                  class="bigActionButton"/>
          <Button text="Summary"
                  press="onGenerateSummary"
                  class="bigActionButton"/>
      </HBox>
 
  </VBox>  
</core:FragmentDefinition>
